{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{% static 'administrator.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
</head>
<body>

    <header class="header">
        <nav class="nav">
            <div class="logo">
                <a href="#">
                    <img src="{% static "img/logo.png" %}" alt="">
                </a>
                <h2>Nexus Literario</h2>
            </div>
    
            <div>
                <a href="#" class="navegador">
                    <img src="{% static "img/usuario.png" %}" alt="">
                    <h3>Cerrar Sesión</h3>
                </a>
            </div>
        </nav>

        <div class="title">
            <h1>Gestión de libros</h1>
        </div>
    </header>


    <main class="main">
        <div class="main-container">
            <!-- Buscador -->
            <div class="buscador">
                <div class="input-buscador">
                    <img src="{% static "img/lupa.png" %}" alt="">
                    <input type="text" placeholder="Buscar...">
                </div>

                <div class="img-delete">
                    <img src="{% static "img/eliminar.png" %}" alt="">
                </div>
            </div>

            <!-- Imagen portada, titulo, descripcion etc-->
            <form class="info-principal">
                <div class="lado_izquierdo">
                    <div class="portada">
                        <img src="{% static "img/portada.jpg" %}" alt="" id="img_default">
                        <input type="file" id="img_input">
                    </div>

                    <div class="autor">
                        <input type="text" id="autor_input" placeholder="Autor...">
                    </div>

                    <div>
                        <label for="fecha_publicacion" class="fecha">
                            <p>Fecha Publicación:</p>
                            <input type="date" id="fecha_publicacion">
                        </label>
                    </div>
                </div>

                <div class="texto">
                    <div class="texto_info">
                        <div class="titulo_precio">
                            <input type="text" id="titulo_input" placeholder="Título...">
                            <label for="precio_input">
                                <p>Precio:</p>
                                <input type="number" id="precio_input">
                                <p> Lps</p>
                            </label>
                        </div>
                        <div class="descripcion">
                            <textarea id="descripcion_input" rows="10" placeholder="Descripción..."></textarea>
                        </div>
                    </div>

                    <div class="checkboxes">
                        <div class="columnaCheck">
                            <label for="masReciente">
                                <input type="checkbox" id="masReciente" name="masReciente">
                                <p>Más Reciente</p>
                            </label>
                            <label for="fechaPublicacion">
                                <input type="checkbox" id="fechaPublicacion" name="fechaPublicacion">
                                <p>Fecha de Publicación</p>
                            </label>
                            <label for="a_z">
                                <input type="checkbox" id="a_z" name="a_z">
                                <p>A-Z</p>
                            </label>
                            <label for="miedo">
                                <input type="checkbox" id="miedo" name="miedo">
                                <p>Miedo</p>
                            </label>
                        </div>

                        <div class="columnaCheck">
                            <label for="romance">
                                <input type="checkbox" id="romance" name="romance">
                                <p>Romance</p>
                            </label>
                            <label for="accion">
                                <input type="checkbox" id="accion" name="accion">
                                <p>Acción</p>
                            </label>
                            <label for="misterio">
                                <input type="checkbox" id="misterio" name="misterio">
                                <p>Misterio</p>
                            </label>
                            <label for="historia">
                                <input type="checkbox" id="historia" name="historia">
                                <p>Historia</p>
                            </label>
                        </div>

                        <div class="columnaCheck">
                            <label for="aventura">
                                <input type="checkbox" id="aventura" name="aventura">
                                <p>Aventura</p>
                            </label>
                            <label for="economia">
                                <input type="checkbox" id="economia" name="economia">
                                <p>Economía</p>
                            </label>
                            <label for="biografias">
                                <input type="checkbox" id="biografias" name="biografias">
                                <p>Biografías</p>
                            </label>
                            <label for="ciencia">
                                <input type="checkbox" id="ciencia" name="ciencia">
                                <p>Ciencia</p>
                            </label>
                        </div>

                        <div class="columnaCheck">
                            <label for="literatura">
                                <input type="checkbox" id="literatura" name="literatura">
                                <p>Literatura</p>
                            </label>
                            <label for="fantasia">
                                <input type="checkbox" id="fantasia" name="fantasia">
                                <p>Fantasia</p>
                            </label>
                            <label for="medicina">
                                <input type="checkbox" id="medicina" name="medicina">
                                <p>Medicina</p>
                            </label>
                            <label for="programacion">
                                <input type="checkbox" id="programacion" name="programacion">
                                <p>Programación</p>
                            </label>
                        </div>
                    </div>

                    <div class="botones">
                        <button type="button" class="cancelar" id="cancelar_btn">
                            <img src="{% static "img/boton-mas.png" %}" alt="">
                            <p>Cancelar</p>
                        </button>
                        <button type="submit" class="guardar">
                            <img src="{% static "img/boton-mas.png" %}" alt="">
                            <p>Guardar</p>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </main>

    <script>
        const originalImgSrc = document.getElementById('img_default').src;

        document.getElementById('img_input').addEventListener('change', function(event) {
            const input = event.target;
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('img_default').src = e.target.result;
                }
                reader.readAsDataURL(input.files[0]);
            }
        });

        function checkForm() {
            const imgInput = document.getElementById('img_input').value;
            const autorInput = document.getElementById('autor_input').value.trim();
            const fechaPublicacion = document.getElementById('fecha_publicacion').value;
            const tituloInput = document.getElementById('titulo_input').value.trim();
            const precioInput = document.getElementById('precio_input').value.trim();
            const descripcionInput = document.getElementById('descripcion_input').value.trim();
            const checkboxes = document.querySelectorAll('.checkboxes input:checked');

            if (imgInput || autorInput || fechaPublicacion || tituloInput || precioInput || descripcionInput || checkboxes.length > 0) {
                document.getElementById('cancelar_btn').style.display = 'flex';
            } else {
                document.getElementById('cancelar_btn').style.display = 'none';
            }
        }

        document.getElementById('img_input').addEventListener('change', checkForm);
        document.getElementById('autor_input').addEventListener('input', checkForm);
        document.getElementById('fecha_publicacion').addEventListener('change', checkForm);
        document.getElementById('titulo_input').addEventListener('input', checkForm);
        document.getElementById('precio_input').addEventListener('input', checkForm);
        document.getElementById('descripcion_input').addEventListener('input', checkForm);
        document.querySelectorAll('.checkboxes input').forEach(checkbox => {
            checkbox.addEventListener('change', checkForm);
        });

        document.getElementById('cancelar_btn').addEventListener('click', () => {
            document.getElementById('img_input').value = '';
            document.getElementById('autor_input').value = '';
            document.getElementById('fecha_publicacion').value = '';
            document.getElementById('titulo_input').value = '';
            document.getElementById('precio_input').value = '';
            document.getElementById('descripcion_input').value = '';
            document.querySelectorAll('.checkboxes input').forEach(checkbox => {
                checkbox.checked = false;
            });

            document.getElementById('img_default').src = originalImgSrc;

            checkForm();
        });

        checkForm();
    </script>
    
</body>
</html>
